# Wellio - AI Agent For Smarter Coaching

## Overview
Wellio is an AI-powered fitness & wellness coaching platform MVP designed to help professionals manage their coaching practice efficiently. It provides client insights and streamlines workflows, aiming to enhance coaching effectiveness and client outcomes. The platform features a modern dashboard, client management, questionnaire building, progress analytics, smart scheduling, communication tools, and AI-driven insights for personalized recommendations. Wellio aims to be a comprehensive solution for coaches looking to optimize their practice with technology.

## User Preferences
- Brand colors must be #E2F9AD (lime) and #28A0AE (teal)
- All visible UI buttons must be functional (no dead interactions)
- PostgreSQL database with Drizzle ORM for data persistence
- Modern, clean aesthetic with professional coaching platform feel
- Questionnaire Builder positioned between Client Management and Progress Analytics in sidebar
- AI Insights and Client Data Logs positioned after Communication in sidebar navigation

## System Architecture

### UI/UX Decisions
The platform utilizes a modern design with React, Tailwind CSS, and Shadcn UI components. It incorporates a teal (#28A0AE) and lime (#E2F9AD) color scheme, supports dark mode, and uses the Inter font family. Interaction patterns include subtle hover and active elevation states for components. The responsive design ensures usability across various viewports, featuring a collapsible sidebar navigation.

### Technical Implementations
Wellio is built with a React frontend and an Express.js backend. Data is persisted using PostgreSQL with Drizzle ORM. State management is handled by TanStack Query v5, and form handling uses React Hook Form with Zod validation. Data visualization is powered by Recharts. The system employs UUID primary keys, uses local timezones for date operations, and ensures robust form validation across all inputs. Loading skeletons and error states are implemented for improved user experience. All numeric health metrics (calories, macronutrients, weight, body fat) use the `real` data type to support decimal precision.

### Feature Specifications
- **Dashboard**: Real-time stats, client progress distribution, today's schedule, recent activity, AI insights, and active goals widget showing top 5 priority goals with progress tracking.
- **Client Management**: Full CRUD operations for clients, supporting manual entry and questionnaire-based onboarding. Includes client search, progress tracking, status management, and form validation. Coaches can send invite links to clients for self-service onboarding.
- **Questionnaire Builder**: Full CRUD for questionnaires with draft/published workflow. Features a visual builder supporting various question types and customizable form settings. Integrates with client management for intake and client onboarding.
- **Progress Analytics**: Tracks key metrics like active clients and average progress over customizable time ranges, with trend charts, goal distribution, and performance insights.
- **Smart Scheduling**: Monthly calendar view for session management, booking forms, and color-coded session types.
- **Communication**: Complete two-way messaging system enabling coaches and clients to exchange messages. Features intelligent client list sorting (unread messages first, then by recent activity, then alphabetically), **bidirectional unread tracking** with badges showing unread counts on both coach Communication and client Chat menu items, **global unread indicators** (red dot on hamburger/sidebar trigger when ANY unread messages exist), **bidirectional auto-mark-as-read** (both coach and client automatically mark opposite-sender messages as read when viewing conversation), separate coach endpoints (`/api/coach/messages`) and client endpoints (`/api/messages`) with proper authentication, and real-time conversation threading. **UI parity achieved**: both coach and client interfaces use identical left sidebar layout (SidebarProvider + AppSidebar/ClientSidebar) with consistent navigation patterns. Clients access messaging via their authenticated portal at `/client/chat`.
- **AI Insights Dashboard**: Provides personalized, AI-powered trend analysis for nutrition, activity, and progress categories for individual clients. Includes confidence scoring, actionable recommendations generated by OpenAI GPT-4, and visual trend badges. AI summaries now acknowledge synced vs manual data collection and **incorporate active goals progress** for comprehensive client assessment.
- **Goal Setting & Progress Tracking**: Complete goal management system with CRUD operations for client goals. Features goal types (weight loss, muscle gain, strength, endurance, flexibility, nutrition, habit, other), target/current value tracking, deadline management, status tracking (active/completed/paused/cancelled), and priority levels (high/medium/low). Visual progress bars show completion percentage. Goals tab integrated into Client Data Logs page for per-client management. Dashboard widget displays top 5 active goals across all clients sorted by priority. AI insights incorporate goal progress into recommendations.
- **Client Data Logs**: Tabbed interface for recording nutrition, workout, check-in data, and managing client goals, with nullable number fields for accurate data representation.
- **Wearables Integration (ROOK API)**: Two-tier integration architecture supporting 400+ devices. **Web-based ROOK API** handles Garmin, Fitbit, Oura, Whoop, and other devices via OAuth flow. **Native iOS app** handles Apple Health via ROOK iOS SDK with HealthKit integration. Connection request system enables coaches to send invite codes to clients via deep links (wellio://connection-request/{code}). Seamlessly integrated into Client Data Logs page. All data delivered via ROOK webhooks with HMAC signature verification for security. Synced data automatically populates nutrition, workout, and check-in logs with dataSource tracking (manual/rook/apple_health). AI insights recognize and acknowledge wearable data for improved accuracy. Request lifecycle: pending → approved → connected (or rejected/expired), with 7-day expiration.
- **Client Portal**: Complete client-facing interface separate from coach dashboard. **Secure password-based authentication** with session management (express-session + PostgreSQL storage). Onboarding flow: coach sends invite link → client completes questionnaire → client sets password → automatic account creation with session. Client dashboard navigation includes Home, Forms, Chat, and Plan sections. Fully responsive design with dedicated client navigation. Invite system tracks status (pending → completed) with email/token management. All client data is scoped by authenticated session with CSRF protection (sameSite cookies).

### System Design Choices
All displayed data is sourced from a robust backend, ensuring 100% authenticity without mock or synthetic data. The system is designed for data accuracy, with calculations like success rate and average progress derived directly from live API data. AI insights leverage OpenAI GPT-4 for sophisticated pattern detection and recommendation generation, requiring a minimum of three data points for trend analysis and incorporating zero-baseline protection.

## External Dependencies
- **OpenAI GPT-4**: For AI insight generation and actionable recommendations.
- **ROOK API**: For wearables integration supporting 400+ devices including Garmin, Fitbit, Oura, and Whoop. Uses webhook-based data delivery with HMAC signature verification.
- **ROOK iOS SDK v3.0+**: For Apple Health/HealthKit integration via native iOS app. Handles data extraction, transformation, and secure transmission.
- **iOS Native App (Swift)**: Companion app for Apple Health integration built with HealthKit framework. Handles connection request deep links, HealthKit authorization, and data sync coordination.
- **PostgreSQL**: Primary database for data persistence, managed with Drizzle ORM.
- **Node.js**: Backend runtime environment with crypto module for HMAC verification.
- **React**: Frontend library.
- **Tailwind CSS**: Utility-first CSS framework for styling.
- **Shadcn UI**: UI component library built on Radix UI.
- **Wouter**: React router for client-side navigation.
- **Recharts**: JavaScript library for data visualization.
- **TanStack Query v5**: For data fetching, caching, and state management.
- **React Hook Form**: For form management and validation.
- **Zod**: For schema validation.